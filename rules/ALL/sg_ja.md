<sub>[READMEへ](../../README.md)</sub>

[日本語](./sg_ja.md) | [English](./sg_en.md)

# Storing Groceries (SG)

参考動画: https://www.youtube.com/watch?v=cA3MnJoOB1g

> [!NOTE]  
> この動画は過去に実施された競技の様子である．今年の競技ルールとは異なる可能性がある．


## メインゴール (Main Goal)

ロボットは，テーブルにある物体を，そのカテゴリや類似性に基づいて，棚に分類して収納することが求められる．


## フォーカス (Focus)

物体検出と認識, 物体特徴認識, 物体操作


## セットアップ (Setup)

- **ロケーション**: 競技はアリーナの内で行われる．
  - **開始地点**: ロボットは，アリーナの外から`ドアオープン`（扉を開くこと）よりスタートする．
  - **テストエレア**: このエリアには，近くに棚とテーブルが配置される．
- **オペレーター**: ロボットが人間の支援を必要としない限り．テストにはオペレーターが関与しない．
- **備品**
  - **テーブル**: テーブルには5-10個の物体が置かれ，ロボットはどの物体を掴むか，どの順番で掴むかを自由に選択できる．
  - **棚**: 棚には，いくつの物体が収納されている．
- **物体**: 物体は発表された物体リストから選択される．未知物体はないとする．
  - **テーブルにおいてある物体**: テーブル上の物体は，規定なく配置される．
  - **棚においてある物体**: 棚上の物体は，カテゴリや類似性に基づいてグループ化される.
- **制限時間**: 10分


## 手順 (Procedure)

### スタートフェーズ (Starting Phase)

1. **セットアップ**: `TC`はチームにロボットを`開始地点`に移動するように指示する．
2. **開始**: `TC`は`開始合図`を与え，タイマーを開始する．同時に，チームは最後の簡単なセットアップ（スタートボタンを押すなど）を完了し，エリアを離れる．2つ以上のボタンを押すなどの複雑なセットアップ手順は許可されていない．
3. **ドアオープン**: チームから1人が`開始合図`でドアを開く．ロボットはドアが開いたことを認識し，自律的にアリーナに入場する．

### 格納フェーズ　(Storing Phase)

1. **ナビゲーション**: アリーナのドアが開いているときに，ロボットは`テストエレア`に移動し，物体が置かれているテーブルに向かう．
2. **検出**: ロボットは掴もうとする物体を検出し，アナウンスする．
3. **把持**: ロボットは，`検出`セクションで事前にアナウンスした物体を把持する．
4. **分類**: ロボットは棚に向かって移動し，配置する場所を探す．その際，ロボットはその場所がなぜ選択したのかを理由を発話する必要がある．
5. **配置**: ロボットは，`分類`セクションでアナウンスした場所に物体を配置する．
6. **ボーナス**: `把持`と`配置`のセクションの際，物体リストで定義されている`小さな`または`重い`物体を掴むことを選択できる．

> [!IMPORTANT]
**新しいカテゴリ**: 棚に置いてある物体のカテゴリのいずれにも当てはまらない物体を掴めた場合は，新しいグループに配置される必要がある．


## デウス・エクス・マキナ (Deus ex Machina)

本タスクでは，次の`デウス・エクス・マキナ`が採用される．
該当アクションの点数は入らないが，より簡単な手法で部分的なタスクをスキップし，全体的なタスクを継続することができる．

| Action | Bypassing |
| --- | --- |
| 物体把持 | 設置されているバッグの数は1つにする |
| 物体配置 | ロボットが選択したバッグを，オペレータがロボットに持たせる．その際，ロボットがオペレーターにバッグの位置を伝える |


## スコアシート (Score Sheet)

| Action | Score |
| --- | :---: |
| **メインタスク** |  |
| &emsp; - テーブルへのナビゲーション                                  | 10 |
| &emsp; - 物体の検出と正確な認識          | 5x10 |
| &emsp; - 物体の把持   | 5x18 |
| &emsp; - 配置場所の選択理由の発話       | 5x10 |
| &emsp; - 物体の配置                         | 5x18 |
| &emsp; - 類似物体の隣に物体の配置 | 5x18 |
|  |  |
| **ボーナスタスク** |  |
| &emsp; - 小さな物体の把持 | 30 |
| &emsp; - 小さな物体の配置 | 30 |
| &emsp; - 重い物体の把持   | 30 |
| &emsp; - 重い物体の配置   | 30 |
|  |  |
| **ペナルティ** |  |
| 不参加（無断） | -500 |
|  |  |
| 合計（ボーナスタスクを含む） | 500 |

> [!NOTE]
> ボーナススコアは，対象となるフェーズのメインタスクを最低一つ達成した場合にのみ獲得可能である．

<!-- **得点係用のスコアシート**: (TBD)SG-score_sheet -->
**得点係用のスコアシート**: [SG-score_sheet](./doc/iHR-C3_SG-score_sheet.pdf)


## 指示 (Instructions)

### ボランティアへ (To Volunteer)

本タスクにはボランティアが関与しない．

### 得点係へ (To Scorer)

得点係は*General Rules*の[採点方法](./grr_ja.md#採点方法scoring-system)に定義されているように選ばれ，以下のタスクを行う．

- 競技が始まる**30分**前に集まる．
- スコアシートの情報についての指示を受ける．
- 競技チームの競技をスコアリングする．
- 他の得点係とTCとスコアを確認し合う．
- スコアシートをTCに提出する．

### TCへ (To TC)

- `セットアップデー`中:
  - 本タスクに用いられる物体を用意する．
- 競技開始直前:
  - テーブルに5〜10個の物体を配置する．
  - 物体をカテゴリまたは類似性によってグループ化して棚に配置する．
  - `小さい`と`重い`物体を選択してアナウンスする．
